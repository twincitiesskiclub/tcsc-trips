{% extends 'admin/admin_base.html' %}

{% block title %}{{ 'Edit Season' if season else 'New Season' }}{% endblock %}

{% block content %}
<div class="admin-header">
    <h1>{{ 'Edit Season' if season else 'New Season' }}</h1>
    <a href="{{ url_for('admin.get_admin_seasons') }}" class="button button-secondary">Back to Seasons</a>
</div>

<form class="admin-form" method="POST">
    <div class="form-row">
        <div class="form-group">
            <label for="year">Year</label>
            <select id="year" name="year" required>
                {% for y in range(2024, 2100) %}
                    <option value="{{ y }}" {% if season and season.year == y %}selected{% endif %}>{{ y }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="season_type">Type</label>
            <select id="season_type" name="season_type" required>
                <option value="spring/summer" {% if season and season.season_type == 'spring/summer' %}selected{% endif %}>Spring / Summer</option>
                <option value="fall/winter" {% if season and season.season_type == 'fall/winter' %}selected{% endif %}>Fall / Winter</option>
            </select>
        </div>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="start_date">Start Date</label>
            <input type="date" id="start_date" name="start_date" value="{{ season.start_date.strftime('%Y-%m-%d') if season and season.start_date else '' }}" required>
        </div>
        <div class="form-group">
            <label for="end_date">End Date</label>
            <input type="date" id="end_date" name="end_date" value="{{ season.end_date.strftime('%Y-%m-%d') if season and season.end_date else '' }}" required>
        </div>
    </div>

    <div class="form-group">
        <label for="price_cents">Price ($)</label>
        <input type="number" id="price_cents" name="price_cents" step="0.01" min="0" value="{{ '%.2f'|format(season.price_cents/100) if season and season.price_cents else '' }}">
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="returning_start">Returning Registration Start</label>
            <input type="datetime-local" id="returning_start" name="returning_start" value="{{ season.returning_start.strftime('%Y-%m-%dT%H:%M') if season and season.returning_start else '' }}">
        </div>
        <div class="form-group">
            <label for="returning_end">Returning Registration End</label>
            <input type="datetime-local" id="returning_end" name="returning_end" value="{{ season.returning_end.strftime('%Y-%m-%dT%H:%M') if season and season.returning_end else '' }}">
        </div>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="new_start">New Registration Start</label>
            <input type="datetime-local" id="new_start" name="new_start" value="{{ season.new_start.strftime('%Y-%m-%dT%H:%M') if season and season.new_start else '' }}">
        </div>
        <div class="form-group">
            <label for="new_end">New Registration End</label>
            <input type="datetime-local" id="new_end" name="new_end" value="{{ season.new_end.strftime('%Y-%m-%dT%H:%M') if season and season.new_end else '' }}">
        </div>
    </div>

    <div class="form-group">
        <label for="registration_limit">Registration Limit</label>
        <input type="number" id="registration_limit" name="registration_limit" min="1" value="{{ season.registration_limit if season and season.registration_limit else '' }}">
    </div>

    <div class="form-group">
        <label for="description">Description</label>
        <textarea id="description" name="description" rows="3">{{ season.description if season and season.description else '' }}</textarea>
    </div>

    <div class="form-actions">
        <button type="submit" class="button">Save Season</button>
        <a href="{{ url_for('admin.get_admin_seasons') }}" class="button button-secondary">Cancel</a>
    </div>
</form>
{% endblock %} 